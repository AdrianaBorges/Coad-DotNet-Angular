@Scripts.Render("~/Scripts/appScripts/TabelaDinamica.js")


<div ng-app="appModule">
    <div ng-controller="TabelaDinamicaController">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <ol class="breadcrumb">
                        <li>
                            <i class="fa fa-home"></i> @Html.ActionLink("Home", "index", "Home")
                        </li>
                        <li class="active">
                            <i class="fa fa-desktop"></i>Tabela Dinâmica
                        </li>
                    </ol>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-table fa-fw"></i>Tabela Dinâmica
                    <div class="pull-right">
                        <div class="btn-group">
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <fieldset>
                        <legend>Configuração</legend>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    @Html.Label("Descrição")
                                    <span class="form-group input-group">
                                        <input type="hidden" class="form-control" ng-model="item.TDC_ID" />
                                        <input type="text" class="form-control" ng-model="item.TAB_DESCRICAO" />
                                        <span class="input-group-btn">
                                            <a href="javascript:void(0)" class="btn btn-default" ng-click="abrirPopUpConsulta()"><span class="fa fa-search"></span></a>
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    @Html.Label("Introdução")
                                    @Html.TextArea("Introducao", "", new { @class = "form-control", ng_model = "item.TAB_INTRODUCAO", rows = "4", ng_if = "item.TAB_INTRODUCAO!=false" })
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    @Html.Label("Observação")
                                    @Html.TextArea("Obs", "", new { @class = "form-control", ng_model = "item.TAB_INTRODUCAO", rows = "4", ng_if = "item.TAB_INTRODUCAO!=false" })
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    @Html.Label("Legenda")
                                    @Html.TextArea("Legenda", "", new { @class = "form-control", ng_model = "item.TAB_LEGENDA_LAYOUT", rows = "4", ng_if = "item.TAB_LEGENDA_LAYOUT!=false" })
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    @Html.Label("Informações de Preenchimento")
                                    @Html.TextArea("Inf", "", new { @class = "form-control", ng_model = "item.TAB_INF_PREENCHIMENTO", rows = "4", ng_if = "item.TAB_INF_PREENCHIMENTO!=false" })
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    @Html.Label("Informações Gerais")
                                    @Html.TextArea("InfGeral", "", new { @class = "form-control", ng_model = "item.TAB_INF_GERAIS", rows = "4", ng_if = "item.TAB_INF_GERAIS!=false" })
                                </div>
                            </div>
                        </div>
                        <legend>Campos da tabela</legend>
                        <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                            <thead>
                                <tr>
                                    <th style="text-align: center;">Ordem
                                    </th>
                                    <th>Campo
                                    </th>
                                    <th>Tipo
                                    </th>
                                    <th>Tamanho
                                    </th>
                                    <th style="text-align: center;">Alinhamento
                                    </th>
                                    <th style="text-align: center;">Referencia
                                    </th>
                                    <th style="text-align: center;">Editar
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-hide="listatabela.length > 0">
                                    <td colspan="10"><a href="#" ng_click="add()" title="Adicionar o novo item">Click no botão ao lado para adicionar um item <i class="fa fa-plus"></i></a></td>
                                </tr>
                                <tr ng-repeat="item in listatabela">
                                    <td app-editable-td="item.TAB_STRING01" label="item.TAB_STRING01" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING01" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING02" label="item.TAB_STRING02" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING02" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING03" label="item.TAB_STRING03" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING03" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING04" label="item.TAB_STRING04" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING04" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING05" label="item.TAB_STRING05" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING05" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING06" label="item.TAB_STRING06" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING06" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING07" label="item.TAB_STRING07" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING07" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING08" label="item.TAB_STRING08" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING08" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING09" label="item.TAB_STRING09" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING09" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING10" label="item.TAB_STRING10" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING10" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING11" label="item.TAB_STRING11" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING11" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING12" label="item.TAB_STRING12" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING12" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING13" label="item.TAB_STRING13" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING13" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING14" label="item.TAB_STRING14" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING14" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_STRING15" label="item.TAB_STRING15" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_STRING15" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>


                                    <td app-editable-td="item.TAB_INT01" label="item.TAB_INT01" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT01" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT02" label="item.TAB_INT02" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT02" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT03" label="item.TAB_INT03" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT03" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT04" label="item.TAB_INT04" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT04" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT05" label="item.TAB_INT05" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT05" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT06" label="item.TAB_INT06" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT06" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT07" label="item.TAB_INT07" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT07" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT08" label="item.TAB_INT08" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT08" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT09" label="item.TAB_INT09" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT09" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_INT10" label="item.TAB_INT10" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_INT10" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>

                                    <td app-editable-td="item.TAB_DATA01" label="item.TAB_DATA01" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA01" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA02" label="item.TAB_DATA02" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA02" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA03" label="item.TAB_DATA03" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA03" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA04" label="item.TAB_DATA04" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA04" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA05" label="item.TAB_DATA05" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA05" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA06" label="item.TAB_DATA06" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA06" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA07" label="item.TAB_DATA07" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA07" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA08" label="item.TAB_DATA08" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA08" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA09" label="item.TAB_DATA09" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA09" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>
                                    <td app-editable-td="item.TAB_DATA10" label="item.TAB_DATA10" blur-event="confirmarEdicaoDDD">
                                        <input type="text" ng-model="item.TAB_DATA10" maxlength="2"
                                            class="form-control grid-input  float-left" ng-blur="confirmarEdicaoDDD($event)" />
                                    </td>

                                    <td style="text-align: center;">
                                        <a href="javascript:void(0)" ng_click="remove($index)" class="btnConfirmaExclusao red" title="Excluir o registro selecionado">
                                            <span class="glyphicon glyphicon-remove-sign"></span>
                                        </a>
                                        <span ng-show="listatabela.length == ($index + 1)">
                                            <a href="javascript:void(0)" ng_click="add()" title="Adicionar o novo item">
                                                <span class="glyphicon glyphicon-plus blue"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </fieldset>
                </div>
                <div class="panel-footer">
                    <input type="button" ng-click="selecionar('../TabelaDinamica/Index')" class="btn btn-default" value="Voltar">
                    <input type="button" ng-click="SalvarTabela()" class="btn btn-default" value="Salvar">
                </div>
            </div>
        </div>
        @*modal-consulta --- Popup modal*@
        <div id="modal-consulta" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Consulta Tabelas Configuradas</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    @Html.Label("Descrição")
                                    <span class="form-group input-group">
                                        <input type="hidden" class="form-control" ng-model="item.TDC_ID" />
                                        <input type="text" class="form-control" ng-model="item.TAB_DESCRICAO" />
                                        <span class="input-group-btn">
                                            <a href="javascript:void(0)" class="btn btn-default" ng-click="listarConfig()"><span class="fa fa-search"></span></a>
                                        </span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                            <thead>
                                <tr>
                                    <th>Código
                                    </th>
                                    <th>Nome tabela
                                    </th>
                                    <th>Ult. Alteração
                                    </th>
                                    <th>Inclusão
                                    </th>
                                    <th>Login
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in listatabelaconfig">
                                    <td>{{item.TDC_ID}}</td>
                                    <td>{{item.TDC_NOME_TABELA}}</td>
                                    <td app-show-date="item.TDC_DATA_ALTERA"></td>
                                    <td app-show-date="item.TDC_DATA_INCLUSAO"></td>
                                    <td>{{item.USU_LOGIN}}</td>
                                    <td style="text-align: center;">
                                        <a href="#" ng_click="javascript:void(0)" title="Selecionar registro"><i class="fa fa-edit"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                         <hr />
                        <app-pagination request-page="paginaReq" load-function="listarConfig(paginaReq)"></app-pagination>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>





