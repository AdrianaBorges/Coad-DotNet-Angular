@using COAD.SEGURANCA.Repositorios.Base
@using Coad.GenericCrud.Extensions


@{
    ViewBag.Title = "Index";
    ViewBag.print = true;
}

@Scripts.Render("~/Scripts/negocio/Dp/dp.js")

<style type="text/css">
    .body {
        background-color: #e8e8e8 !important;
    }
    .cabec {
        text-align: left;
        vertical-align: top;
        font-size: 7px;
        font: bold;
        margin: 0px;
        padding: 0px;
    }
    .text {
        text-align: left;
        vertical-align: bottom;
        font-size: 7px;
        margin: 0px;
        padding: 0px;
    }
    .cabecdet {
        text-align: right;
        vertical-align: top;
        font-size: 7px;
        font: bold;
        margin: 0px;
        padding: 0px;
    }
    .det {
        text-align: right;
        vertical-align: bottom;
        font-size: 7px;
        margin: 0px;
        padding: 0px;
    }
    .linha {
        height: 20px;
        margin: 0px;
        padding: 0px;
        border: 2px solid #000000 !important;
        
    }
    .linhadet {
        height: 20px;
        margin: 0px;
        padding: 0px;
        border-left: 2px solid #000000 !important;
        border-right: 2px solid #000000 !important;
    }
</style>

<div ng-app="appModule">
    <div ng-controller="DpController" class="padding content" ng-init="init('@ViewBag.cpf');canPrint=true" ng-cloak>
        <div id="page-wrapper" ng-if="lista==false">
            <div ng-if="lsteventos.length==0">
                <img src="~/Images/ops.jpg" />
            </div>
            <div class="panel panel-corp" ng-if="lsteventos.length>0">
                <div class="panel-body">
                    <table class="table-responsive" id="baseContent">
                        <tr>
                            <td>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td style="text-align:left;width:20%;">
                                                <img src="~/Images/logo-coad-topo.png" style="width:100px;height:40px;" />
                                            </td>
                                            <td>
                                                <div style="text-align:center;vertical-align:middle;"><strong>COMPROVANTE DE PAGAMENTO</strong></div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td>
                                                <div class="cabec">Empresa</div>
                                                <div class="text">{{empresa.EMP_RAZAO_SOCIAL}}</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td>
                                                <div class="cabec">Endereço</div>
                                                <div class="text">{{empresa.EMP_LOGRADOURO}}, nº {{empresa.EMP_NUMERO}},{{empresa.EMP_BAIRRO}}</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td>
                                                <div class="cabec">CNPJ / CEI</div>
                                                <div class="text">{{empresa.EMP_CNPJ}}</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">Matrícula</div>
                                                <div class="text">{{lsteventos[0].CCH_NUM_MATRICULA}}</div>
                                            </td>
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">Nome do Empregado</div>
                                                <div class="text">{{lsteventos[0].CCH_NOME_FUNCIONARIO}}</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">Mês / Ano</div>
                                                <div class="text">{{lsteventos[0].CCH_MES_COMP}} / {{lsteventos[0].CCH_ANO_COMP}}</div>
                                            </td>
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">Função</div>
                                                <div class="text">{{lsteventos[0].CCH_CARGO}}</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">Setor</div>
                                                <div class="text">{{lsteventos[0].CCH_SETOR}}</div>
                                            </td>
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">CTPS</div>
                                                <div class="text">{{lsteventos[0].CCH_NUM_CTPS}}</div>
                                            </td>
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">CPF</div>
                                                <div class="text">{{lsteventos[0].CCH_NUM_CPF}}</div>
                                            </td>
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabecdet">Salário</div>
                                                <div class="det" app-show-dinheiro="lsteventos[0].CCH_VLR_PROVENTO"></div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">Banco</div>
                                                <div class="text">{{lsteventos[0].CCH_BAN_NOME}}</div>
                                            </td>
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">Agência</div>
                                                <div class="text">{{lsteventos[0].CCH_AGE_NOME}}</div>
                                            </td>
                                            <td  style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="cabec">Conta</div>
                                                <div class="text">{{lsteventos[0].CCH_CTA_PGTO}}</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover" style="border: 2px solid #000000 !important;">
                                    <tbody>
                                        <tr class="linha">
                                            <td class="linhadet">Código</td>
                                            <td class="linhadet">Descrição</td>
                                            <td class="linhadet" style="text-align:right;">Referência</td>
                                            <td class="linhadet" style="text-align:right;">Proventos</td>
                                            <td class="linhadet" style="text-align:right;">Descontos</td>
                                        </tr>
                                        <tr ng-repeat="item in lsteventos" class="linhadet">
                                            <td class="text" style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;"> {{item.CCH_COD_EVENTO}}</td>
                                            <td class="text" style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">{{item.CCH_DESC_EVENTO}}</td>
                                            <td style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;">
                                                <div class="det">{{item.CCH_REFERENCIA | number:2}}</div>
                                            </td>
                                            <td style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;"><div class="det" app-show-dinheiro="item.CCH_VLR_PROVENTO"></div></td>
                                            <td style="border-left: 2px solid #000000 !important;border-right: 2px solid #000000 !important;"><div class="det" app-show-dinheiro="item.CCH_VLR_DESCONTOS"></div></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td>
                                                <div class="cabecdet">Salario Base</div>
                                                <div class="det" app-show-dinheiro="lsteventos[0].CCH_SAL_BASE"></div>
                                            </td>
                                            <td>
                                                <div class="cabecdet">Sal.Contr.INSS</div>
                                                <div class="det" app-show-dinheiro="lsteventos[0].CCH_BASE_INSS"></div>
                                            </td>
                                            <td>
                                                <div class="cabecdet">Total Proventos</div>
                                                <div class="det" app-show-dinheiro="CCH_TOT_VLR_PROVENTO"></div>
                                            </td>
                                            <td>
                                                <div class="cabecdet">Total Descontos</div>
                                                <div class="det" app-show-dinheiro="CCH_TOT_VLR_DESCONTOS"></div>
                                            </td>
                                        </tr>
                                        <tr  class="linha">
                                            <td>
                                                <div class="cabecdet">Base Calc FGTS</div>
                                                <div class="det" app-show-dinheiro="lsteventos[0].CCH_BASE_FGTS"></div>
                                            </td>
                                            <td>
                                                <div class="cabecdet">FGTS do Mês</div>
                                                <div class="det" app-show-dinheiro="lsteventos[0].CCH_VLR_FGTS_MES"></div>
                                            </td>
                                            <td>
                                                <div class="cabecdet">Base Cálc IRRF</div>
                                                <div class="det" app-show-dinheiro="lsteventos[0].CCH_BASE_IRRF"></div>
                                            </td>
                                            <td>
                                                <div class="cabecdet">Valor Líquido</div>
                                                <div class="det" app-show-dinheiro="lsteventos[0].CCH_VLR_LIQUIDO"></div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha" style="height:100px;">
                                            <td>
                                                <div class="cabec">Mensagem</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table table-striped table-bordered table-hover">
                                    <tbody>
                                        <tr class="linha">
                                            <td>
                                                <div class="cabec">Data:_______/ _______/_________</div>
                                            </td>
                                            <td>
                                                <div class="cabec">Assinatura:______________________</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="panel-footer hidden-print">
                    <a class="btn btn-success" href="javascript:void(0)" app-print="#baseContent" print-flag="canPrint">
                        <span><span class="glyphicon glyphicon-print"></span>&nbspImprimir</span>
                    </a>
                    <button type="button" class="btn btn-default" ng-click="buscarContraCheque()"><span class="glyphicon glyphicon-arrow-left red"></span>&nbspFechar</button>
                </div>
            </div>
        </div>
        <div id="page-wrapper" class="hidden-print" ng-if="lista==true">
            <div class="row">
                <div class="col-lg-12">
                    <ol class="breadcrumb">
                        <li>
                            <i class="fa fa-home"></i><a href="/Home/Index">Home</a>
                        </li>
                        <li class="active">
                            <span>Contra Cheques</span>
                        </li>
                    </ol>
                </div>
            </div>
            <div class="panel panel-corp">
                <div app-message></div><div class="panel-heading bold head-panel">
                    <span class="glyphicon glyphicon-filter"></span>Emissão de Contra Cheques
                    <div class="pull-right">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                Opções<span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu pull-right" role="menu">
                                <li>
                                    <a href="javascript:void(0)" ng-click="buscarContraCheque(cpf)" title="Editar" class="blue">Pesquisar</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    @if (SessionContext.AcessoGerente("DEPARTAMENTO PESSOAL"))
                    {
                        <div class="row">
                            <div class="form-group col-lg-2">
                                <label for="dpCpf">Informe o CPF</label> 
                                <input type="text" id="dpCpf" ng-model="cpf" class="form-control" maxlength="11" placeholder="informe o CPF apenas números" ng-blur="buscarContraCheque(cpf)" />
                            </div>
                            <div class="form-group col-lg-4" style="padding-top:30px;">
                                <strong>{{lstchlst[0].NOME}}</strong> 
                            </div>
                        </div>
                    }
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr class="info">
                                    <th style="text-align: left;">Referência</th>
                                    <th style="text-align: left;">Descrição</th>
                                    <th style="text-align: left;">Período</th>
                                    <th style="text-align: center;">Opções</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in lstchlst">
                                    <td>{{item.MESCOMP}}/{{item.ANOCOMP}}</td>
                                    <td>{{item.DESCRICAO}}</td>
                                    <td>
                                        <span ng-if="item.NROPERIODO==1">Prêmio</span>
                                        <span ng-if="item.NROPERIODO==2">Comissões</span>
                                        <span ng-if="item.NROPERIODO==3">Adiantamento</span>
                                        <span ng-if="item.NROPERIODO==4">Pagto Mensal / Folha Geral</span>
                                        <span ng-if="item.NROPERIODO==5">13º Décimo Terceiro</span>
                                        <span ng-if="item.NROPERIODO==6">Diferença de 13º Salário</span>
                                        <span ng-if="item.NROPERIODO==7">Adicional</span>
                                    </td>
                                    <td style="text-align: center;">
                                        <a class="btn btn-success" href="javascript:void(0)" ng-click="emitirContracheque(item)">
                                            <i class="fa fa-print"></i>
                                        </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="panel-footer">
                    <button type="button" class="btn btn-default" ng-click="buscarContraCheque()"><span class="glyphicon glyphicon-search"></span>&nbspPesquisar</button>
                </div>
            </div>
        </div>
    </div>
</div>



